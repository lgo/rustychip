package(default_visibility = ["//visibility:public"])

load(":opts.bzl", "SDL_LINK_OPTS")

licenses(["notice"])

filegroup(
    name = "sdl2_headers",
    srcs = [
        "include/SDL.h",
        "include/SDL_assert.h",
        "include/SDL_atomic.h",
        "include/SDL_audio.h",
        "include/SDL_bits.h",
        "include/SDL_blendmode.h",
        "include/SDL_clipboard.h",
        "include/SDL_config.h",
        "include/SDL_config_android.h",
        "include/SDL_config_iphoneos.h",
        "include/SDL_config_linux.h",
        "include/SDL_config_macosx.h",
        "include/SDL_config_minimal.h",
        "include/SDL_config_pandora.h",
        "include/SDL_config_winrt.h",
        "include/SDL_config_wiz.h",
        "include/SDL_copying.h",
        "include/SDL_cpuinfo.h",
        "include/SDL_egl.h",
        "include/SDL_endian.h",
        "include/SDL_error.h",
        "include/SDL_events.h",
        "include/SDL_filesystem.h",
        "include/SDL_gamecontroller.h",
        "include/SDL_gesture.h",
        "include/SDL_haptic.h",
        "include/SDL_hints.h",
        "include/SDL_joystick.h",
        "include/SDL_keyboard.h",
        "include/SDL_keycode.h",
        "include/SDL_loadso.h",
        "include/SDL_log.h",
        "include/SDL_main.h",
        "include/SDL_messagebox.h",
        "include/SDL_mouse.h",
        "include/SDL_mutex.h",
        "include/SDL_name.h",
        "include/SDL_opengl.h",
        "include/SDL_opengl_glext.h",
        "include/SDL_opengles.h",
        "include/SDL_opengles2.h",
        "include/SDL_opengles2_gl2.h",
        "include/SDL_opengles2_gl2ext.h",
        "include/SDL_opengles2_gl2platform.h",
        "include/SDL_opengles2_khrplatform.h",
        "include/SDL_pixels.h",
        "include/SDL_platform.h",
        "include/SDL_power.h",
        "include/SDL_quit.h",
        "include/SDL_rect.h",
        "include/SDL_render.h",
        "include/SDL_revision.h",
        "include/SDL_rwops.h",
        "include/SDL_scancode.h",
        "include/SDL_shape.h",
        "include/SDL_stdinc.h",
        "include/SDL_surface.h",
        "include/SDL_system.h",
        "include/SDL_syswm.h",
        "include/SDL_test.h",
        "include/SDL_thread.h",
        "include/SDL_timer.h",
        "include/SDL_touch.h",
        "include/SDL_types.h",
        "include/SDL_version.h",
        "include/SDL_video.h",
        "include/SDL_vulkan.h",
        "include/begin_code.h",
        "include/close_code.h",
    ],
)

cc_library(
    name = "SDL2",
    srcs = glob(
        include = [
            "src/**/*.c",
            "src/**/*.h",
        ],
        exclude = [
            "src/libm/*.c",
            "src/test/*.c",
            "src/render/direct3d*/**",
            "src/render/SDL_d3d*",
            "src/video/qnx/*.c",
            "src/haptic/windows/**",
            "src/thread/generic/*.c",
        ],
    ),
    hdrs = [":sdl2_headers"],
    copts = [
        "-Wno-string-conversion",
    ],
    includes = ["include"],
    linkopts = SDL_LINK_OPTS,
    linkstatic = 1,
)
